


ARM Macro Assembler    Page 1 


    1 00000000         ;=======================================================
                       =======================
    2 00000000         ; STM32F103C8 LEDæ§åˆ¶æ±‡ç¼–ç¨‹åº
    3 00000000         ; åŠŸèƒ½ï¼šæ§åˆ¶PC13å¼•è„šçš„LEDé—ªçƒ
    4 00000000         ; æ—¥æœŸï¼š2025
    5 00000000         ;=======================================================
                       =======================
    6 00000000         
    7 00000000         ;-------------------------------------------------------
                       -----------------------
    8 00000000         ; å¯„å­˜å™¨åœ°å€å®šä¹‰
    9 00000000         ;-------------------------------------------------------
                       -----------------------
   10 00000000 40021018 
                       RCC_APB2ENR
                               EQU              0x40021018  ; RCC APB2å¤–è®¾æ—¶
                                                            é’Ÿä½¿èƒ½å¯„å­˜å™¨
   11 00000000 40011004 
                       GPIOC_CRH
                               EQU              0x40011004  ; GPIOCé…ç½®å¯„å­˜
                                                            å™¨é«˜ä½(æ§åˆ¶å¼•
                                                            è„š8-15)
   12 00000000 4001100C 
                       GPIOC_ODR
                               EQU              0x4001100C  ; GPIOCè¾“å‡ºæ•°æ®
                                                            å¯„å­˜å™¨
   13 00000000 E000E010 
                       Systick_CTRL
                               EQU              0xE000E010  ; SysTickæ§åˆ¶ä¸ç
                                                            Š¶æ€å¯„å­˜å™¨
   14 00000000 E000E014 
                       Systick_LOAD
                               EQU              0xE000E014  ; SysTickåŠ è½½å€¼å
                                                            ¯„å­˜å™¨
   15 00000000 E000E018 
                       Systick_VAL
                               EQU              0xE000E018  ; SysTickå½“å‰å€¼å
                                                            ¯„å­˜å™¨
   16 00000000         
   17 00000000         ;-------------------------------------------------------
                       -----------------------
   18 00000000         ; ä½å®šä¹‰
   19 00000000         ;-------------------------------------------------------
                       -----------------------
   20 00000000 00000010 
                       RCC_APB2ENR_IOPCEN
                               EQU              0x00000010  ; GPIOCæ—¶é’Ÿä½¿èƒ½
                                                            ä½(bit 4)
   21 00000000 00C00000 
                       GPIO_CRH_CNF13
                               EQU              0x00C00000  ; PC13é…ç½®ä½[23:
                                                            22]
   22 00000000 00300000 
                       GPIO_CRH_MODE13
                               EQU              0x00300000  ; PC13æ¨¡å¼ä½[21:
                                                            20]
   23 00000000 00002000 
                       GPIO_ODR_ODR13
                               EQU              0x00002000  ; PC13è¾“å‡ºæ•°æ®ä



ARM Macro Assembler    Page 2 


                                                            ½(bit 13)
   24 00000000         
   25 00000000         ;=======================================================
                       =======================
   26 00000000         ; ä»£ç æ®µå®šä¹‰
   27 00000000         ;=======================================================
                       =======================
   28 00000000                 AREA             |.text|, CODE, READONLY
   29 00000000                 THUMB                        ; ä½¿ç”¨ThumbæŒ‡ä»¤
                                                            é›†
   30 00000000                 REQUIRE8                     ; è¦æ±‚8å­—èŠ‚å¯¹é
                                                            ½
   31 00000000                 PRESERVE8                    ; ä¿æŒ8å­—èŠ‚å¯¹é
                                                            ½
   32 00000000         
   33 00000000                 EXPORT           __main      ; å¯¼å‡ºmainå‡½æ•°
   34 00000000                 ENTRY                        ; ç¨‹åºå…¥å£ç‚¹
   35 00000000         
   36 00000000         ;=======================================================
                       =======================
   37 00000000         ; ä¸»å‡½æ•° - LEDé—ªçƒæ§åˆ¶ç¨‹åº
   38 00000000         ;=======================================================
                       =======================
   39 00000000         __main
   40 00000000         ;-------------------------------------------------------
                       -------
   41 00000000         ; æ­¥éª¤1: å¼€å¯GPIOCæ—¶é’Ÿ
   42 00000000         ; RCC->APB2ENR |= RCC_APB2ENR_IOPCEN
   43 00000000         ;-------------------------------------------------------
                       -------
   44 00000000 4824            LDR              r0, =RCC_APB2ENR ; åŠ è½½RCC_AP
                                                            B2ENRå¯„å­˜å™¨åœ°å
                                                            €
   45 00000002 6801            LDR              r1, [r0]    ; è¯»å–å½“å‰å¯„å­
                                                            ˜å™¨å€¼
   46 00000004 F04F 0210       LDR              r2, =RCC_APB2ENR_IOPCEN ; åŠ è½
                                                            ½GPIOCæ—¶é’Ÿä½¿èƒ½ä
                                                            ½
   47 00000008 EA41 0102       ORR              r1, r1, r2  ; è®¾ç½®GPIOCæ—¶é’Ÿ
                                                            ä½¿èƒ½ä½
   48 0000000C 6001            STR              r1, [r0]    ; å†™å›å¯„å­˜å™¨
   49 0000000E         
   50 0000000E         ;-------------------------------------------------------
                       -------
   51 0000000E         ; æ­¥éª¤2: é…ç½®PC13ä¸ºæ¨æŒ½è¾“å‡ºæ¨¡å¼ï¼Œ50MHz
   52 0000000E         ; GPIOC->CRH &= ~(GPIO_CRH_CNF13 | GPIO_CRH_MODE13)
   53 0000000E         ; GPIOC->CRH |= GPIO_CRH_MODE13 (50MHzè¾“å‡º)
   54 0000000E         ;-------------------------------------------------------
                       -------
   55 0000000E 4822            LDR              r0, =GPIOC_CRH ; åŠ è½½GPIOC_CR
                                                            Hå¯„å­˜å™¨åœ°å€
   56 00000010 6801            LDR              r1, [r0]    ; è¯»å–å½“å‰å¯„å­
                                                            ˜å™¨å€¼
   57 00000012         
   58 00000012         ; æ¸…é™¤PC13çš„é…ç½®ä½å’Œæ¨¡å¼ä½
   59 00000012 F44F 0240       LDR              r2, =GPIO_CRH_CNF13 ; åŠ è½½é…
                                                            ç½®ä½æ©ç 
   60 00000016 F44F 1340       LDR              r3, =GPIO_CRH_MODE13 ; åŠ è½½æ¨
                                                            ¡å¼ä½æ©ç 



ARM Macro Assembler    Page 3 


   61 0000001A EA42 0203       ORR              r2, r2, r3  ; åˆå¹¶éœ€è¦æ¸…é™
                                                            ¤çš„ä½
   62 0000001E EA21 0102       BIC              r1, r1, r2  ; æ¸…é™¤è¿™äº›ä½
   63 00000022         
   64 00000022         ; è®¾ç½®PC13ä¸ºæ¨æŒ½è¾“å‡ºï¼Œ50MHz (MODE13[1:0] = 11)
   65 00000022 F44F 1240       LDR              r2, =GPIO_CRH_MODE13 
                                                            ; åŠ è½½æ¨¡å¼ä½
   66 00000026 EA41 0102       ORR              r1, r1, r2  ; è®¾ç½®æ¨¡å¼ä½ä¸
                                                            º11(50MHzè¾“å‡º)
   67 0000002A 6001            STR              r1, [r0]    ; å†™å›å¯„å­˜å™¨
   68 0000002C         
   69 0000002C         ;=======================================================
                       =======================
   70 0000002C         ; ä¸»å¾ªç¯ - LEDé—ªçƒæ§åˆ¶
   71 0000002C         ;=======================================================
                       =======================
   72 0000002C         loop
   73 0000002C         ;-------------------------------------------------------
                       -------
   74 0000002C         ; ç‚¹äº®LED (è®¾ç½®PC13è¾“å‡ºä½ç”µå¹³)
   75 0000002C         ; GPIOC->ODR &= ~GPIO_ODR_ODR13
   76 0000002C         ;-------------------------------------------------------
                       -------
   77 0000002C 481B            LDR              r0, =GPIOC_ODR ; åŠ è½½GPIOC_OD
                                                            Rå¯„å­˜å™¨åœ°å€
   78 0000002E 6801            LDR              r1, [r0]    ; è¯»å–å½“å‰å¯„å­
                                                            ˜å™¨å€¼
   79 00000030 F44F 5200       LDR              r2, =GPIO_ODR_ODR13 ; åŠ è½½PC1
                                                            3è¾“å‡ºä½
   80 00000034 EA21 0102       BIC              r1, r1, r2  ; æ¸…é™¤PC13ä½(è®¾
                                                            ç½®ä¸ºä½ç”µå¹³)
   81 00000038 6001            STR              r1, [r0]    ; å†™å›å¯„å­˜å™¨
   82 0000003A         
   83 0000003A         ;-------------------------------------------------------
                       -------
   84 0000003A         ; å»¶è¿Ÿ500æ¯«ç§’ (LEDç‚¹äº®æŒç»­æ—¶é—´)
   85 0000003A         ; 500000å¾®ç§’ = 500æ¯«ç§’ = 0.5ç§’
   86 0000003A         ;-------------------------------------------------------
                       -------
   87 0000003A 4819            LDR              r0, =500000 ; åŠ è½½å»¶è¿Ÿæ—¶é—
                                                            ´ï¼š500000å¾®ç§’
   88 0000003C F000 F823       BL               delay_ms    ; è°ƒç”¨å»¶è¿Ÿå‡½æ•
                                                            °
   89 00000040         
   90 00000040         ;-------------------------------------------------------
                       -------
   91 00000040         ; ç†„ç­LED (è®¾ç½®PC13è¾“å‡ºé«˜ç”µå¹³)
   92 00000040         ; GPIOC->ODR |= GPIO_ODR_ODR13
   93 00000040         ;-------------------------------------------------------
                       -------
   94 00000040 4816            LDR              r0, =GPIOC_ODR ; åŠ è½½GPIOC_OD
                                                            Rå¯„å­˜å™¨åœ°å€
   95 00000042 6801            LDR              r1, [r0]    ; è¯»å–å½“å‰å¯„å­
                                                            ˜å™¨å€¼
   96 00000044 F44F 5200       LDR              r2, =GPIO_ODR_ODR13 ; åŠ è½½PC1
                                                            3è¾“å‡ºä½
   97 00000048 EA41 0102       ORR              r1, r1, r2  ; è®¾ç½®PC13ä½(è®¾
                                                            ç½®ä¸ºé«˜ç”µå¹³)
   98 0000004C 6001            STR              r1, [r0]    ; å†™å›å¯„å­˜å™¨



ARM Macro Assembler    Page 4 


   99 0000004E         
  100 0000004E         ;-------------------------------------------------------
                       -------
  101 0000004E         ; å»¶è¿Ÿ500æ¯«ç§’ (LEDç†„ç­æŒç»­æ—¶é—´)
  102 0000004E         ; 500000å¾®ç§’ = 500æ¯«ç§’ = 0.5ç§’
  103 0000004E         ; æ€»é—ªçƒå‘¨æœŸï¼š1ç§’ (0.5ç§’äº® + 0.5ç§’ç­)
  104 0000004E         ;-------------------------------------------------------
                       -------
  105 0000004E 4814            LDR              r0, =500000 ; åŠ è½½å»¶è¿Ÿæ—¶é—
                                                            ´ï¼š500000å¾®ç§’
  106 00000050 F000 F819       BL               delay_ms    ; è°ƒç”¨å»¶è¿Ÿå‡½æ•
                                                            °
  107 00000054 E7EA            B                loop        ; æ— æ¡ä»¶è·³è½¬åˆ
                                                            °loopæ ‡ç­¾ï¼Œå½¢æˆ
                                                            æ— é™å¾ªç¯
  108 00000056         
  109 00000056         ;=======================================================
                       =======================
  110 00000056         ; å»¶è¿Ÿå‡½æ•° - ä½¿ç”¨SysTickå®šæ—¶å™¨å®ç°ç²¾ç¡®å»¶è¿
                       Ÿ
  111 00000056         ; è¾“å…¥å‚æ•°ï¼šr0 = å»¶è¿Ÿæ—¶é—´ï¼ˆå¾®ç§’ï¼‰
  112 00000056         ; åŠŸèƒ½ï¼šåŸºäº72MHzç³»ç»Ÿæ—¶é’Ÿå®ç°å¾®ç§’çº§å»¶è¿Ÿ
  113 00000056         ;=======================================================
                       =======================
  114 00000056         delay
  115 00000056         ;-------------------------------------------------------
                       -------
  116 00000056         ; è®¡ç®—SysTickåŠ è½½å€¼
  117 00000056         ; 72MHzæ—¶é’Ÿä¸‹ï¼Œ1å¾®ç§’éœ€è¦72ä¸ªæ—¶é’Ÿå‘¨æœŸ
  118 00000056         ; è®¡ç®—å…¬å¼ï¼šload_value = delay_us * 72
  119 00000056         ;-------------------------------------------------------
                       -------
  120 00000056 EA4F 1180       LSL              r1, r0, #6  ; r1 = r0 * 64 (å·¦
                                                            ç§»6ä½)
  121 0000005A EA4F 02C0       LSL              r2, r0, #3  ; r2 = r0 * 8 (å·¦ç
                                                            §»3ä½)
  122 0000005E 4411            ADD              r1, r1, r2  ; r1 = r0 * 72 (64 
                                                            + 8 = 72)
  123 00000060         
  124 00000060         ;-------------------------------------------------------
                       -------
  125 00000060         ; é…ç½®SysTickåŠ è½½å¯„å­˜å™¨
  126 00000060         ; è®¾ç½®å€’è®¡æ•°åˆå€¼
  127 00000060         ;-------------------------------------------------------
                       -------
  128 00000060 4A10            LDR              r2, =Systick_LOAD ; åŠ è½½SysTi
                                                            ckåŠ è½½å¯„å­˜å™¨åœ
                                                            °å€
  129 00000062 6011            STR              r1, [r2]    ; å†™å…¥è®¡ç®—å¾—åˆ
                                                            °çš„åŠ è½½å€¼
  130 00000064         
  131 00000064         ;-------------------------------------------------------
                       -------
  132 00000064         ; æ¸…é›¶SysTickå½“å‰å€¼å¯„å­˜å™¨
  133 00000064         ; é‡ç½®è®¡æ•°å™¨ä¸º0ï¼Œå¼€å§‹æ–°çš„è®¡æ•°å‘¨æœŸ
  134 00000064         ;-------------------------------------------------------
                       -------
  135 00000064 4A10            LDR              r2, =Systick_VAL ; åŠ è½½SysTic
                                                            kå½“å‰å€¼å¯„å­˜å™¨



ARM Macro Assembler    Page 5 


                                                            åœ°å€
  136 00000066 F04F 0100       MOV              r1, #0      ; å‡†å¤‡æ¸…é›¶å€¼
  137 0000006A 6011            STR              r1, [r2]    ; æ¸…é›¶å½“å‰å€¼å¯
                                                            „å­˜å™¨
  138 0000006C         
  139 0000006C         ;-------------------------------------------------------
                       -------
  140 0000006C         ; å¯åŠ¨SysTickå®šæ—¶å™¨
  141 0000006C         ; CTRL[2:0] = 101b: ä½¿èƒ½å®šæ—¶å™¨ + ä½¿ç”¨å¤„ç†å™¨æ—¶
                       é’Ÿ + ç¦ç”¨ä¸­æ–­
  142 0000006C         ;-------------------------------------------------------
                       -------
  143 0000006C 4A0F            LDR              r2, =Systick_CTRL ; åŠ è½½SysTi
                                                            ckæ§åˆ¶å¯„å­˜å™¨åœ
                                                            °å€
  144 0000006E F04F 0105       MOV              r1, #0x05   ; 0x05 = 101b (ä½¿è
                                                            ƒ½+å¤„ç†å™¨æ—¶é’Ÿ+
                                                            æ— ä¸­æ–­)
  145 00000072 6011            STR              r1, [r2]    ; å¯åŠ¨SysTickå®šæ
                                                            —¶å™¨
  146 00000074         
  147 00000074         ;-------------------------------------------------------
                       -----------------------
  148 00000074         ; å»¶è¿Ÿå¾ªç¯ - ç­‰å¾…SysTickè®¡æ•°å®Œæˆ
  149 00000074         ;-------------------------------------------------------
                       -----------------------
  150 00000074         delay_loop
  151 00000074         ;-------------------------------------------------------
                       -------
  152 00000074         ; æ£€æŸ¥COUNTFLAGä½(bit 16)
  153 00000074         ; å½“è®¡æ•°å™¨ä»1å‡åˆ°0æ—¶ï¼Œæ­¤ä½è¢«ç¡¬ä»¶ç½®1
  154 00000074         ;-------------------------------------------------------
                       -------
  155 00000074 6811            LDR              r1, [r2]    ; è¯»å–SysTickæ§å
                                                            ˆ¶å¯„å­˜å™¨
  156 00000076 F411 3180       ANDS             r1, r1, #0x00010000 ; æ£€æŸ¥COU
                                                            NTFLAGä½(bit 16)
  157 0000007A D0FB            BEQ              delay_loop  ; å¦‚æœCOUNTFLAG=0
                                                            ï¼Œç»§ç»­ç­‰å¾…
  158 0000007C         
  159 0000007C         ;-------------------------------------------------------
                       -------
  160 0000007C         ; å…³é—­SysTickå®šæ—¶å™¨
  161 0000007C         ; ä¿æŒæ—¶é’Ÿæºè®¾ç½®ï¼Œä½†ç¦ç”¨å®šæ—¶å™¨
  162 0000007C         ;-------------------------------------------------------
                       -------
  163 0000007C 4A0B            LDR              r2, =Systick_CTRL ; é‡æ–°åŠ è½
                                                            ½æ§åˆ¶å¯„å­˜å™¨åœ°
                                                            å€
  164 0000007E F04F 0104       MOV              r1, #0x04   ; 0x04 = 100b (ç¦ç
                                                            ”¨+å¤„ç†å™¨æ—¶é’Ÿ+
                                                            æ— ä¸­æ–­)
  165 00000082 6011            STR              r1, [r2]    ; å…³é—­SysTickå®šæ
                                                            —¶å™¨
  166 00000084         
  167 00000084 4770            BX               lr
  168 00000086         
  169 00000086         delay_ms
  170 00000086 F44F 737A       LDR              r3, =1000



ARM Macro Assembler    Page 6 


  171 0000008A         delay_ms_loop
  172 0000008A F7FF FFE4       BL               delay
  173 0000008E 1E5B            SUBS             r3, r3, #1
  174 00000090 D1FB            BNE              delay_ms_loop
  175 00000092         
  176 00000092 4770            BX               lr
  177 00000094         ;=======================================================
                       =======================
  178 00000094         ; ç¨‹åºç»“æŸ
  179 00000094         ;=======================================================
                       =======================
  180 00000094                 ALIGN                        ; ç¡®ä¿ä»£ç æ®µå¯
                                                            ¹é½
  181 00000094                 END
              40021018 
              40011004 
              4001100C 
              0007A120 
              E000E014 
              E000E018 
              E000E010 
Command Line: --debug --xref --diag_suppress=9931 --cpu=Cortex-M3 --apcs=interw
ork --depend=.\objects\main.d -o.\objects\main.o -I.\RTE\_Target_1 -IC:\Keil_v5
\ARM\PACK\Keil\STM32F1xx_DFP\2.2.0\Device\Include -IC:\Keil_v5\ARM\CMSIS\Includ
e --predefine="__UVISION_VERSION SETA 524" --predefine="STM32F10X_MD SETA 1" --
list=.\listings\main.lst User\main.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

.text 00000000

Symbol: .text
   Definitions
      At line 28 in file User\main.s
   Uses
      None
Comment: .text unused
__main 00000000

Symbol: __main
   Definitions
      At line 39 in file User\main.s
   Uses
      At line 33 in file User\main.s
Comment: __main used once
delay 00000056

Symbol: delay
   Definitions
      At line 114 in file User\main.s
   Uses
      At line 172 in file User\main.s
Comment: delay used once
delay_loop 00000074

Symbol: delay_loop
   Definitions
      At line 150 in file User\main.s
   Uses
      At line 157 in file User\main.s
Comment: delay_loop used once
delay_ms 00000086

Symbol: delay_ms
   Definitions
      At line 169 in file User\main.s
   Uses
      At line 88 in file User\main.s
      At line 106 in file User\main.s

delay_ms_loop 0000008A

Symbol: delay_ms_loop
   Definitions
      At line 171 in file User\main.s
   Uses
      At line 174 in file User\main.s
Comment: delay_ms_loop used once
loop 0000002C

Symbol: loop
   Definitions
      At line 72 in file User\main.s
   Uses
      At line 107 in file User\main.s
Comment: loop used once
7 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Absolute symbols

GPIOC_CRH 40011004

Symbol: GPIOC_CRH
   Definitions
      At line 11 in file User\main.s
   Uses
      At line 55 in file User\main.s
Comment: GPIOC_CRH used once
GPIOC_ODR 4001100C

Symbol: GPIOC_ODR
   Definitions
      At line 12 in file User\main.s
   Uses
      At line 77 in file User\main.s
      At line 94 in file User\main.s

GPIO_CRH_CNF13 00C00000

Symbol: GPIO_CRH_CNF13
   Definitions
      At line 21 in file User\main.s
   Uses
      At line 59 in file User\main.s
Comment: GPIO_CRH_CNF13 used once
GPIO_CRH_MODE13 00300000

Symbol: GPIO_CRH_MODE13
   Definitions
      At line 22 in file User\main.s
   Uses
      At line 60 in file User\main.s
      At line 65 in file User\main.s

GPIO_ODR_ODR13 00002000

Symbol: GPIO_ODR_ODR13
   Definitions
      At line 23 in file User\main.s
   Uses
      At line 79 in file User\main.s
      At line 96 in file User\main.s

RCC_APB2ENR 40021018

Symbol: RCC_APB2ENR
   Definitions
      At line 10 in file User\main.s
   Uses
      At line 44 in file User\main.s
Comment: RCC_APB2ENR used once
RCC_APB2ENR_IOPCEN 00000010

Symbol: RCC_APB2ENR_IOPCEN
   Definitions
      At line 20 in file User\main.s
   Uses
      At line 46 in file User\main.s
Comment: RCC_APB2ENR_IOPCEN used once



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Absolute symbols

Systick_CTRL E000E010

Symbol: Systick_CTRL
   Definitions
      At line 13 in file User\main.s
   Uses
      At line 143 in file User\main.s
      At line 163 in file User\main.s

Systick_LOAD E000E014

Symbol: Systick_LOAD
   Definitions
      At line 14 in file User\main.s
   Uses
      At line 128 in file User\main.s
Comment: Systick_LOAD used once
Systick_VAL E000E018

Symbol: Systick_VAL
   Definitions
      At line 15 in file User\main.s
   Uses
      At line 135 in file User\main.s
Comment: Systick_VAL used once
10 symbols
351 symbols in table
